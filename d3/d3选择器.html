<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>d3 选择器 | oliveying</title>
    <meta name="description" content="前端知识，JavaScript，html，css，tool，git，markdown">
    <link rel="icon" href="/knowledge/img/favicon.ico">
    
    <link rel="preload" href="/knowledge/assets/css/0.styles.9483da07.css" as="style"><link rel="preload" href="/knowledge/assets/js/app.71f71174.js" as="script"><link rel="preload" href="/knowledge/assets/js/33.f7925eb2.js" as="script"><link rel="prefetch" href="/knowledge/assets/js/10.dfe34650.js"><link rel="prefetch" href="/knowledge/assets/js/11.2f6a0ca4.js"><link rel="prefetch" href="/knowledge/assets/js/12.6962bcd7.js"><link rel="prefetch" href="/knowledge/assets/js/13.cc03ea2b.js"><link rel="prefetch" href="/knowledge/assets/js/14.5a420397.js"><link rel="prefetch" href="/knowledge/assets/js/15.33af8d18.js"><link rel="prefetch" href="/knowledge/assets/js/16.15abf371.js"><link rel="prefetch" href="/knowledge/assets/js/17.8cfa3693.js"><link rel="prefetch" href="/knowledge/assets/js/18.25d231ba.js"><link rel="prefetch" href="/knowledge/assets/js/19.b02852de.js"><link rel="prefetch" href="/knowledge/assets/js/2.63d3bc16.js"><link rel="prefetch" href="/knowledge/assets/js/20.62522f91.js"><link rel="prefetch" href="/knowledge/assets/js/21.b16f034c.js"><link rel="prefetch" href="/knowledge/assets/js/22.b470c21c.js"><link rel="prefetch" href="/knowledge/assets/js/23.d39e7c43.js"><link rel="prefetch" href="/knowledge/assets/js/24.d87a309d.js"><link rel="prefetch" href="/knowledge/assets/js/25.e41e528b.js"><link rel="prefetch" href="/knowledge/assets/js/26.d47ab7eb.js"><link rel="prefetch" href="/knowledge/assets/js/27.37fe1b31.js"><link rel="prefetch" href="/knowledge/assets/js/28.352ce51a.js"><link rel="prefetch" href="/knowledge/assets/js/29.6a96dba7.js"><link rel="prefetch" href="/knowledge/assets/js/3.99abc0fd.js"><link rel="prefetch" href="/knowledge/assets/js/30.6474890c.js"><link rel="prefetch" href="/knowledge/assets/js/31.a248ccf8.js"><link rel="prefetch" href="/knowledge/assets/js/32.db190804.js"><link rel="prefetch" href="/knowledge/assets/js/34.75063b8e.js"><link rel="prefetch" href="/knowledge/assets/js/35.42f40b13.js"><link rel="prefetch" href="/knowledge/assets/js/36.72f0c93f.js"><link rel="prefetch" href="/knowledge/assets/js/37.85cd6488.js"><link rel="prefetch" href="/knowledge/assets/js/38.a44bfd37.js"><link rel="prefetch" href="/knowledge/assets/js/39.b4c20a33.js"><link rel="prefetch" href="/knowledge/assets/js/4.a00af598.js"><link rel="prefetch" href="/knowledge/assets/js/40.a811483c.js"><link rel="prefetch" href="/knowledge/assets/js/41.472790df.js"><link rel="prefetch" href="/knowledge/assets/js/42.76ba16a9.js"><link rel="prefetch" href="/knowledge/assets/js/43.482b4dec.js"><link rel="prefetch" href="/knowledge/assets/js/44.a579bf69.js"><link rel="prefetch" href="/knowledge/assets/js/45.dccf4327.js"><link rel="prefetch" href="/knowledge/assets/js/46.ede79909.js"><link rel="prefetch" href="/knowledge/assets/js/47.ce36a91f.js"><link rel="prefetch" href="/knowledge/assets/js/48.a3810abb.js"><link rel="prefetch" href="/knowledge/assets/js/49.a003c59d.js"><link rel="prefetch" href="/knowledge/assets/js/5.85428d44.js"><link rel="prefetch" href="/knowledge/assets/js/50.527e83fb.js"><link rel="prefetch" href="/knowledge/assets/js/51.4fba37b9.js"><link rel="prefetch" href="/knowledge/assets/js/52.594aa123.js"><link rel="prefetch" href="/knowledge/assets/js/53.84564173.js"><link rel="prefetch" href="/knowledge/assets/js/54.c83a0137.js"><link rel="prefetch" href="/knowledge/assets/js/55.1a532974.js"><link rel="prefetch" href="/knowledge/assets/js/56.1ee817cf.js"><link rel="prefetch" href="/knowledge/assets/js/57.b1a20777.js"><link rel="prefetch" href="/knowledge/assets/js/58.aeba76b5.js"><link rel="prefetch" href="/knowledge/assets/js/59.775aaf3d.js"><link rel="prefetch" href="/knowledge/assets/js/6.e9dc83f2.js"><link rel="prefetch" href="/knowledge/assets/js/60.69beefad.js"><link rel="prefetch" href="/knowledge/assets/js/61.327f9d94.js"><link rel="prefetch" href="/knowledge/assets/js/62.69a95234.js"><link rel="prefetch" href="/knowledge/assets/js/63.e601c00f.js"><link rel="prefetch" href="/knowledge/assets/js/64.54cad81e.js"><link rel="prefetch" href="/knowledge/assets/js/65.dd03c6b7.js"><link rel="prefetch" href="/knowledge/assets/js/66.4d8a08c8.js"><link rel="prefetch" href="/knowledge/assets/js/67.5e33cec4.js"><link rel="prefetch" href="/knowledge/assets/js/68.5dc90beb.js"><link rel="prefetch" href="/knowledge/assets/js/69.ec4ea2c0.js"><link rel="prefetch" href="/knowledge/assets/js/7.25a1fc9a.js"><link rel="prefetch" href="/knowledge/assets/js/70.71fe2749.js"><link rel="prefetch" href="/knowledge/assets/js/71.787b6f75.js"><link rel="prefetch" href="/knowledge/assets/js/72.6131a43c.js"><link rel="prefetch" href="/knowledge/assets/js/73.2607a0e5.js"><link rel="prefetch" href="/knowledge/assets/js/74.22054e55.js"><link rel="prefetch" href="/knowledge/assets/js/75.5fe59163.js"><link rel="prefetch" href="/knowledge/assets/js/76.aacd59b3.js"><link rel="prefetch" href="/knowledge/assets/js/77.9fd1b018.js"><link rel="prefetch" href="/knowledge/assets/js/78.f91d5c9e.js"><link rel="prefetch" href="/knowledge/assets/js/79.26417175.js"><link rel="prefetch" href="/knowledge/assets/js/8.f36abd09.js"><link rel="prefetch" href="/knowledge/assets/js/80.d87cb77b.js"><link rel="prefetch" href="/knowledge/assets/js/81.a9ccd590.js"><link rel="prefetch" href="/knowledge/assets/js/82.c90c7c08.js"><link rel="prefetch" href="/knowledge/assets/js/83.b757065b.js"><link rel="prefetch" href="/knowledge/assets/js/84.48499d92.js"><link rel="prefetch" href="/knowledge/assets/js/85.c3c2ddf1.js"><link rel="prefetch" href="/knowledge/assets/js/86.98d26821.js"><link rel="prefetch" href="/knowledge/assets/js/87.24852456.js"><link rel="prefetch" href="/knowledge/assets/js/88.48b8b639.js"><link rel="prefetch" href="/knowledge/assets/js/89.79553f7f.js"><link rel="prefetch" href="/knowledge/assets/js/9.240bee87.js"><link rel="prefetch" href="/knowledge/assets/js/90.78bc0785.js"><link rel="prefetch" href="/knowledge/assets/js/91.1fbd2371.js"><link rel="prefetch" href="/knowledge/assets/js/92.74df108f.js"><link rel="prefetch" href="/knowledge/assets/js/93.1a7bc8db.js"><link rel="prefetch" href="/knowledge/assets/js/94.10d60bdb.js"><link rel="prefetch" href="/knowledge/assets/js/95.c0069bc8.js"><link rel="prefetch" href="/knowledge/assets/js/96.5c73f4d8.js"><link rel="prefetch" href="/knowledge/assets/js/97.e63864e7.js"><link rel="prefetch" href="/knowledge/assets/js/98.9de9313c.js">
    <link rel="stylesheet" href="/knowledge/assets/css/0.styles.9483da07.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/knowledge/" class="home-link router-link-active"><!----> <span class="site-name">oliveying</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/knowledge/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">book</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/bgoodparts/" class="nav-link">语言精粹</a></li><li class="dropdown-item"><!----> <a href="/knowledge/http/" class="nav-link">图解http</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/knowledge/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/knowledge/h5/" class="nav-link">h5最新用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/knowledge/brower/" class="nav-link">浏览器特性</a></li><li class="dropdown-item"><!----> <a href="/knowledge/d3/" class="nav-link router-link-active">d3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/summary/" class="nav-link">总结</a></li><li class="dropdown-item"><!----> <a href="/knowledge/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/knowledge/problem/" class="nav-link">problem</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/start/" class="nav-link">启动</a></li><li class="dropdown-item"><!----> <a href="/knowledge/tool/" class="nav-link">工具用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/markdown/" class="nav-link">markDown</a></li><li class="dropdown-item"><!----> <a href="/knowledge/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/knowledge/mac/" class="nav-link">mac</a></li><li class="dropdown-item"><!----> <a href="/knowledge/develop/" class="nav-link">提升</a></li></ul></div></div> <a href="https://github.com/oliveying/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/knowledge/" class="nav-link">Home</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">book</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/bgoodparts/" class="nav-link">语言精粹</a></li><li class="dropdown-item"><!----> <a href="/knowledge/http/" class="nav-link">图解http</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端技术</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/html/" class="nav-link">html</a></li><li class="dropdown-item"><!----> <a href="/knowledge/css/" class="nav-link">css</a></li><li class="dropdown-item"><!----> <a href="/knowledge/js/" class="nav-link">javascript</a></li><li class="dropdown-item"><!----> <a href="/knowledge/h5/" class="nav-link">h5最新用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/node/" class="nav-link">node</a></li><li class="dropdown-item"><!----> <a href="/knowledge/brower/" class="nav-link">浏览器特性</a></li><li class="dropdown-item"><!----> <a href="/knowledge/d3/" class="nav-link router-link-active">d3</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">总结</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/summary/" class="nav-link">总结</a></li><li class="dropdown-item"><!----> <a href="/knowledge/interview/" class="nav-link">面试</a></li><li class="dropdown-item"><!----> <a href="/knowledge/problem/" class="nav-link">problem</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">扩展</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/knowledge/start/" class="nav-link">启动</a></li><li class="dropdown-item"><!----> <a href="/knowledge/tool/" class="nav-link">工具用法</a></li><li class="dropdown-item"><!----> <a href="/knowledge/markdown/" class="nav-link">markDown</a></li><li class="dropdown-item"><!----> <a href="/knowledge/linux/" class="nav-link">linux</a></li><li class="dropdown-item"><!----> <a href="/knowledge/mac/" class="nav-link">mac</a></li><li class="dropdown-item"><!----> <a href="/knowledge/develop/" class="nav-link">提升</a></li></ul></div></div> <a href="https://github.com/oliveying/knowledge" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/knowledge/d3/d3选择器.html" class="active sidebar-link">d3 选择器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#获取html-的元素method" class="sidebar-link">获取html 的元素Method</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#attr-method" class="sidebar-link">attr() method</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#style-method" class="sidebar-link">style() method</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#d3-js-数据加入" class="sidebar-link">d3.js 数据加入</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#svg-简介" class="sidebar-link">svg 简介</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#svg-转换" class="sidebar-link">SVG 转换</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#d3-js-transition" class="sidebar-link">D3.js - Transition</a></li><li class="sidebar-sub-header"><a href="/knowledge/d3/d3选择器.html#d3-js-动画" class="sidebar-link">D3.js - 动画</a></li></ul></li></ul> </div> <div class="page"> <div class="content"><h1 id="d3-选择器"><a href="#d3-选择器" aria-hidden="true" class="header-anchor">#</a> d3 选择器</h1> <h2 id="获取html-的元素method"><a href="#获取html-的元素method" aria-hidden="true" class="header-anchor">#</a> 获取html 的元素Method</h2> <h3 id="select-选择器-selectall-选择器"><a href="#select-选择器-selectall-选择器" aria-hidden="true" class="header-anchor">#</a> select 选择器 selectAll 选择器</h3> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'#div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'.div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">'#div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="append-method"><a href="#append-method" aria-hidden="true" class="header-anchor">#</a> append() method</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> body <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> span <span class="token operator">=</span> body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span> <span class="token comment">// &lt;div&gt;&lt;span&gt;d3.js&lt;span&gt;&lt;div&gt;</span>
span<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">'from d3.js'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="html-method"><a href="#html-method" aria-hidden="true" class="header-anchor">#</a> html() method</h3> <div class="language-js extra-class"><pre class="language-js"><code> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World! &lt;span&gt;from D3.js&lt;/span&gt;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 替换myclass中的内容，span标签会解析</span>
</code></pre></div><h2 id="attr-method"><a href="#attr-method" aria-hidden="true" class="header-anchor">#</a> attr() method</h2> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color: red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="style-method"><a href="#style-method" aria-hidden="true" class="header-anchor">#</a> style() method</h2> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="the-classed-method"><a href="#the-classed-method" aria-hidden="true" class="header-anchor">#</a> The classed() Method</h3> <p>classed（）方法专门用于设置HTML元素的&quot;class&quot;属性。此方法知道如何处理元素上的一个或多个类，并且它将具有高性能。</p> <ul><li>添加类:要添加类，必须将分类方法的第二个参数设置为true。 它定义如下:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;addclass&quot;</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>删除类:要删除类，必须将分类方法的第二个参数设置为false。 它定义如下:</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;removeclass&quot;</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>检查类:要检查是否存在类，只需省略第二个参数并传递要查询的类名。 如果存在则返回true，如果不存在，则返回false。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;hasclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果选择中的任何元素具有类，则返回true。 使用d3.select进行单个元素选择。</p> <ul><li>切换类:将类翻转到相反的状态 - 如果它已经存在则将其删除，如果它尚不存在则添加它 - 您可以执行以下操作之一。</li></ul> <p>对于单个元素，代码可能如下所示:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> element <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span>
element<span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;myanotherclass&quot;</span><span class="token punctuation">,</span> <span class="token operator">!</span>oneBar<span class="token punctuation">.</span><span class="token function">classed</span><span class="token punctuation">(</span><span class="token string">&quot;myanotherclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="the-selectall-method"><a href="#the-selectall-method" aria-hidden="true" class="header-anchor">#</a> The selectAll() Method</h3> <p>selectAll（）方法用于选择HTML文档中的多个元素。 select方法选择第一个元素，但selectAll方法选择与特定选择器字符串匹配的所有元素。 如果选择匹配none，则返回空选择。 我们也可以在selectAll（）方法中链接所有附加的修改方法，append（），html（），text（），attr（），style（），classed（）等。 在这种情况下，方法将影响所有匹配元素。</p> <div class="language-js extra-class"><pre class="language-js"><code> d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;.myclass&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;style&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color: red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="d3-js-数据加入"><a href="#d3-js-数据加入" aria-hidden="true" class="header-anchor">#</a> d3.js 数据加入</h2> <p>默认情况下，D3.js在其方法中为数据集提供最高优先级，并且数据集中的每个项对应于HTML元素.本章详细介绍了数据连接.</p> <h3 id="什么是数据连接？"><a href="#什么是数据连接？" aria-hidden="true" class="header-anchor">#</a> 什么是数据连接？</h3> <p>数据连接使我们能够注入，修改和删除元素(HTML元素)以及基于现有HTML文档中的数据集的嵌入式SVG元素.默认情况下，数据集中的每个数据项对应于文档中的元素(图形).</p> <p>随着数据集的变化，也可以轻松操作相应的元素.数据连接在我们的数据和文档的图形元素之间创建了一种紧密的关系.数据连接使得基于数据集的元素操作变得非常简单和容易.</p> <ul><li>数据连接如何工作？</li></ul> <p>主要目的是数据连接是使用给定的数据集映射现有文档的元素.它根据给定的数据集创建文档的虚拟表示，并提供使用虚拟表示的方法.让我们考虑一个简单的数据集，如下所示.</p> <p>数据集有五个项目，因此，它可以映射到文档的五个元素.让我们使用选择器的selectAll()方法和数据连接的data()方法将它映射到以下文档的 li 元素.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>list<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>remove<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>Remove fourth value<span class="token punctuation">&quot;</span></span> 
         <span class="token attr-name">onclick</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>remove()<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">/* D3.js代码
d3.select(&quot;＃list &quot;).selectAll(&quot;li&quot;).data([10,20,30,25,15]);
前两个虚拟元素对应文档中定义的两个 li 元素
1. li - 10
2. li - 20
// 我们可以使用所有选择器的元素修改方法，如 attr()，style()，text ()等，对于前两个 li 

d3.select(&quot;#list&quot;).selectAll(&quot;li&quot;)
   .data([10, 20, 30, 25, 15])
   .text(function(d) { return d; }); // 填充前两个li

下一个三个元素可以映射到任何元素，可以使用数据连接的enter()和selector的append()方法完成. enter()方法提供对剩余数据的访问(未映射到现有元素)，append()方法用于从相应数据创建新元素.我们也为剩余的数据项创建 li .数据地图如下 :

3. li - 30
4. li - 25
5. li - 15
*/</span>
<span class="token comment">// 创建新的li元素的代码如下 :</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is pre-existing element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> 
      <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is dynamically created element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 数据连接提供另一种方法，称为 exit()方法，用于处理从数据集中动态删除的数据项，我们已经从数据集及其相应的li中删除了第四项exit()和remove()方法.</span>
      <span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h3 id="data-join-methods"><a href="#data-join-methods" aria-hidden="true" class="header-anchor">#</a> Data Join Methods</h3> <p>数据连接提供以下四种方法来处理数据集:</p> <ul><li>datum()</li> <li>data()</li> <li>enter()</li> <li>exit()</li></ul> <h4 id="the-datum-method"><a href="#the-datum-method" aria-hidden="true" class="header-anchor">#</a> The datum() Method</h4> <p>datum（）方法用于为HTML文档中的单个元素设置值。 一旦使用选择器选择元素，就会使用它。 例如，我们可以使用select（）方法选择现有元素（p标签），然后使用datum（）方法设置数据。 设置数据后，我们可以更改所选元素的文本或添加新元素，并使用datum（）方法设置的数据分配文本。</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span><span class="token number">50</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> <span class="token string">&quot;Used existing paragraph element and the data &quot;</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token string">&quot; is assigned.&quot;</span><span class="token punctuation">;</span> <span class="token comment">// p元素里的文本</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         
         d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">datum</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span>
         <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
            <span class="token keyword">return</span> <span class="token string">&quot;Created new paragraph element and the data &quot;</span> <span class="token operator">+</span> d <span class="token operator">+</span> <span class="token string">&quot; is assigned.&quot;</span><span class="token punctuation">;</span> <span class="token comment">// div里插入p，设置p的文本为datum里的data</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="the-data-method"><a href="#the-data-method" aria-hidden="true" class="header-anchor">#</a> The data() method</h4> <p>data（）方法用于将数据集分配给HTML文档中的元素集合。 使用选择器选择HTML元素后使用它。 在我们的列表示例中，我们使用它来设置li选择器的数据集。</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="the-enter-method"><a href="#the-enter-method" aria-hidden="true" class="header-anchor">#</a> The enter() method</h3> <p>enter（）方法输出之前没有图形元素的数据项集。 在我们的列表示例中，我们使用它来创建新的li元素。</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#list&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is pre-existing element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">enter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">&quot;This is dynamically created element and the value is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="the-exit-method"><a href="#the-exit-method" aria-hidden="true" class="header-anchor">#</a> The exit() method</h4> <p>exit（）方法输出不再存在数据的图形元素集。 在我们的列表示例中，我们使用它通过删除数据集中的数据项来动态删除其中一个li元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;li&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="data-function"><a href="#data-function" aria-hidden="true" class="header-anchor">#</a> Data Function</h4> <p>在DOM操作章节中，我们了解了D3.js中的不同DOM操作方法，例如style（），text（）等。这些函数中的每一个通常都以常量值作为参数。 然而，在Data join的上下文中，它将匿名函数作为参数。 此匿名函数获取相应的数据和使用data（）方法分配的数据集的索引。 因此，将为绑定到DOM的每个数据值调用此匿名函数。 考虑以下text（）函数。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在此函数中，我们可以应用任何逻辑来操纵数据。 这些是匿名函数，意味着没有与函数关联的名称。 除了data（d）和index（i）参数之外，我们可以使用此关键字访问当前对象，如下所示:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> paragraph <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;p&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">d<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the data element</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the index element</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// the current DOM object</span>
  <span class="token comment">// 参数&quot;d&quot;为您提供数据元素，&quot;i&quot;为您提供数组中的数据索引，&quot;this&quot;是当前DOM元素的引用</span>
  <span class="token keyword">return</span> <span class="token string">&quot;The index is &quot;</span> <span class="token operator">+</span> i <span class="token operator">+</span> <span class="token string">&quot; and the data is &quot;</span> <span class="token operator">+</span> d<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="svg-简介"><a href="#svg-简介" aria-hidden="true" class="header-anchor">#</a> svg 简介</h2> <p>SVG代表可缩放矢量图形. SVG是一种基于XML的矢量图形格式.它提供了绘制不同形状的选项，如直线，矩形，圆形，椭圆等.因此，使用SVG设计可视化为您提供更多的功能和灵活性.</p> <h3 id="svg的功能"><a href="#svg的功能" aria-hidden="true" class="header-anchor">#</a> SVG的功能</h3> <p>SVG的一些显着特征如下:</p> <ul><li><p>SVG是一种基于矢量的图像格式，它是基于文本的.</p></li> <li><p>SVG在结构上与HTML类似.</p></li> <li><p>SVG可以表示为文档对象模型.</p></li> <li><p>可以将SVG属性指定为属性.</p></li> <li><p>SVG应该具有相对于原点(0,0)的绝对位置.</p></li> <li><p>SVG可以包含在HTML文档中.</p></li></ul> <p>让我们创建一个最小的SVG图像并将其包含在HTML文档中.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 创建一个SVG图像并将宽度设置为300像素，高度设置为300像素
svg 标签启动SVG图像，它具有宽度和高度作为属性. SVG格式的默认单位是像素. --&gt;</span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 创建一条从(100,100)开始到(200,100)结束的行，并为该行设置红色. --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>line</span> <span class="token attr-name">x1</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y1</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">x2</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y2</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> 
   <span class="token attr-name">style</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>stroke:rgb(255,0,0);stroke-width:2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- 行标记绘制一条线，其属性 x1，y1 指的是起始线点和 x2，y2 指的是结束点. style属性使用笔划和笔划宽度样式设置线条的颜色和粗细. --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="svg-using-d3-js"><a href="#svg-using-d3-js" aria-hidden="true" class="header-anchor">#</a> SVG Using D3.js</h3> <p>要使用D3.js创建SVG，请按照下面给出的步骤操作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 创建一个容器来保存SVG图像</span>
<span class="token comment">// 使用select（）方法选择SVG容器，并使用append（）方法注入SVG元素。 使用attr（）和style（）方法添加属性和样式。</span>
<span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 在svg元素中添加line元素，如下所示。</span>
svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;line&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x1&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y1&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x2&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span> 
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y2&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rgb(255,0,0)&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;stroke-width&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="rectangle-element"><a href="#rectangle-element" aria-hidden="true" class="header-anchor">#</a> Rectangle Element</h3> <ul><li>矩形由<code>&lt;rect&gt;</code>标记表示，如下所示。</li></ul> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">y</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rect</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- 矩形的属性如下:

x :这是矩形左上角的x坐标。

y: 这是矩形左上角的y坐标。

width: 这表示矩形的宽度。

height :这表示矩形的高度。 --&gt;</span>

</code></pre></div><ul><li>可以如下所述动态创建相同的矩形.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token comment">//Create SVG element</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//Create and append rectangle element</span>
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="circle-element"><a href="#circle-element" aria-hidden="true" class="header-anchor">#</a> Circle Element</h3> <p>圆圈由<circle>标签表示，如下所述.</circle></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">r</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token comment">&lt;!-- cx :这是圆心的x坐标。
cy : 这是圆心的y坐标。
r :这表示圆的半径。 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><ul><li>使用SVG动态创建相同的圆圈.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token comment">//Create SVG element</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token comment">//Append circle </span>
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ellipse-element"><a href="#ellipse-element" aria-hidden="true" class="header-anchor">#</a> Ellipse Element</h3> <p>SVG Ellipse元素由<code>&lt;ellipse&gt;</code>标记表示，如下所述.</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ellipse</span> <span class="token attr-name">cx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>200<span class="token punctuation">&quot;</span></span> <span class="token attr-name">cy</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">rx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>100<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ry</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>50<span class="token punctuation">&quot;</span></span> <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!-- // 椭圆的属性如下:

// cx:这是椭圆中心的x坐标.

// cy:这是椭圆中心的y坐标.

// rx: 这是圆的x半径.

// ry:这是圆的y半径. --&gt;</span>
</code></pre></div><ul><li>使用d3进行svg绘制</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
         <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>
         svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;ellipse&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;rx&quot;</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;ry&quot;</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="svg-转换"><a href="#svg-转换" aria-hidden="true" class="header-anchor">#</a> SVG 转换</h2> <p>SVG提供了转换单个SVG形状元素或SVG元素组的选项. SVG转换支持翻译，缩放，旋转和倾斜.让我们在本章中学习转换.</p> <h3 id="svg转换简介"><a href="#svg转换简介" aria-hidden="true" class="header-anchor">#</a> SVG转换简介</h3> <p>SVG引入了一个新属性转换来支持转型.可能的值是以下一项或多项:</p> <p>翻译 : 它需要两个选项， tx 指的是沿x轴的平移， ty 指的是沿y轴的平移.对于示例 : 翻译(30 30).</p> <p>旋转 : 它需要三个选项，角度指旋转角度， cx 和 cy 指的是x和y轴旋转的中心.如果未指定 cx 和 cy ，则默认为坐标系的当前原点.对于示例 : 旋转(60).</p> <p>比例 : 它有两个选项， sx 是指沿x轴的缩放因子， sy 是指沿y轴的缩放因子.这里， sy 是可选的，如果未指定，则它取 sx 的值.对于示例 :  scale(10).</p> <p>歪斜(SkewX和SkewY) : 它只需一个选项; 倾斜角是指SkewX沿x轴的角度和SkewY沿y轴的角度.对于示例 :  skewx(20).</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!-- 
  带有translate的SVG矩形
可以使用空格作为分隔为单个SVG元素指定多个转换。 如果指定了多个值，则将按指定的顺序逐个应用转换。
转换也可以应用于SVG组元素。 这使得能够转换SVG中定义的复杂图形，如下所述。

要创建SVG图像，请尝试缩放，并使用变换旋转它
Step 1 : 创建SVG图像并将宽度设置为300像素，将高度设置为300像素。
Step 2: 创建一个SVG组。
Step 3:创建一个长度为60且高度为30的矩形，并用绿色填充它。
Step 4 :创建一个半径为30的圆，并用红色填充它。
Step 5 : 添加转换属性并添加平移和旋转，如下所示。 
--&gt;</span>
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>svgcontainer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span> <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>g</span> <span class="token attr-name">transform</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>translate(60,60) rotate(30)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rect</span> <span class="token attr-name">x</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">y</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>20<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">width</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">height</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>60<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>green<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rect</span><span class="token punctuation">&gt;</span></span>
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>circle</span> <span class="token attr-name">cx</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">cy</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">r</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>30<span class="token punctuation">&quot;</span></span> 
                  <span class="token attr-name">fill</span> <span class="token attr-value"><span class="token punctuation">=</span> <span class="token punctuation">&quot;</span>red<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>g</span><span class="token punctuation">&gt;</span></span>
         <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="transformation-using-d3-js"><a href="#transformation-using-d3-js" aria-hidden="true" class="header-anchor">#</a> Transformation Using D3.js</h3> <p>要使用D3.js创建SVG，请按照下面给出的步骤操作。</p> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">var</span> width <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> height <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> svg <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;#svgcontainer&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;svg&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> height<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">var</span> group <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;translate(60, 60) rotate(30)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            
            <span class="token keyword">var</span> rect <span class="token operator">=</span> group<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;rect&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;y&quot;</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;width&quot;</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;height&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span>
            
            <span class="token keyword">var</span> circle <span class="token operator">=</span> group
               <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;circle&quot;</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cx&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;cy&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;r&quot;</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
               <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;fill&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="转换库"><a href="#转换库" aria-hidden="true" class="header-anchor">#</a> 转换库</h3> <p>D3.js提供了一个单独的库来管理转换，而无需手动创建转换属性.它提供了处理所有类型转换的方法.一些方法是 transform()，translate()，scale()，rotate()等.您可以使用以下脚本在网页中包含 d3-transform .</p> <div class="language-html extra-class"><pre class="language-html"><code>&lt; script src =&quot;http://d3js.org/d3.v4.min.js&quot;&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script&amp;gt</span> <span class="token attr-name">;</span> 
<span class="token attr-name">&lt;</span> <span class="token attr-name">script</span> <span class="token attr-name">src</span> <span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>d3-transform.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>在上面的例子中，转换代码可以写成如下所示 :</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> my_transform <span class="token operator">=</span> <span class="token function">d3Transform</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">rotate</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> group <span class="token operator">=</span> svg
   <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;g&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&quot;transform&quot;</span><span class="token punctuation">,</span> my_transform<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="d3-js-transition"><a href="#d3-js-transition" aria-hidden="true" class="header-anchor">#</a> D3.js - Transition</h2> <p>过渡是一个项目从一个状态转换到另一个状态的过程. D3.js提供了一个 transition()方法来在HTML页面中执行转换.让我们在本章中了解转换.</p> <h3 id="transition-方法"><a href="#transition-方法" aria-hidden="true" class="header-anchor">#</a> transition()方法</h3> <p>transition()方法适用于所有选择器，它启动过渡进程.此方法支持大多数选择方法，如-attr()，style()等.但是，它不支持append()和data()方法，这些方法需要在transition()方法之前调用.此外，它提供了特定于转换的方法，如duration()，ease()等.一个简单的转换可以定义如下 :</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;background-color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lightblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>可以使用d3.transition()方法直接创建转换，然后与选择器一起使用，如下所示.</p> <div class="language-js extra-class"><pre class="language-js"><code> 
<span class="token keyword">var</span> t <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;background-color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lightblue&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="d3-js-动画"><a href="#d3-js-动画" aria-hidden="true" class="header-anchor">#</a> D3.js - 动画</h2> <p>D3.js通过过渡支持动画.我们可以通过正确使用过渡来做动画.转换是关键帧动画的有限形式，只有两个关键帧 - 开始和结束.起始关键帧通常是DOM的当前状态，而结束关键帧是您指定的一组属性，样式和其他属性.转换非常适合转换到新视图，而不需要依赖于起始视图的复杂代码.</p> <h3 id="持续时间-方法"><a href="#持续时间-方法" aria-hidden="true" class="header-anchor">#</a> 持续时间()方法</h3> <p>duration()方法允许属性更改在指定的持续时间内平滑发生，而不是瞬间发生.让我们使用以下代码进行5秒的转换.</p> <div class="language-js extra-class"><pre class="language-js"><code> d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;h3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 此处，转换平稳且均匀.我们还可以使用以下方法直接指定RGB颜色代码值.</span>
 d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;h3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;rgb(0,150,120)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>现在，每个颜色编号从0到150缓慢，平滑且均匀地进行.要获得从起始帧值到中间帧的准确混合结束帧值，D3.js使用内部插值方法.语法在下面给出 :</p> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">interpolate</span><span class="token punctuation">(</span>a，b<span class="token punctuation">)</span>
</code></pre></div><p>D3还支持以下插值类型 :</p> <ul><li><p>interpolateNumber : 支持数值.</p></li> <li><p>interpolateRgb : 支持颜色.</p></li> <li><p>interpolateString : 支持字符串.</p></li></ul> <p>D3.js负责使用正确的插值方法，在高级情况下，我们可以直接使用插值方法得到我们想要的结果.如果需要，我们甚至可以创建一个新的插值方法.</p> <h3 id="delay-方法"><a href="#delay-方法" aria-hidden="true" class="header-anchor">#</a> delay()方法</h3> <p>delay()方法允许进行转换过了一段时间.请考虑</p> <div class="language-js extra-class"><pre class="language-js"><code>  d3<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&quot;h3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;font-size&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;28px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">duration</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="转型生命周期"><a href="#转型生命周期" aria-hidden="true" class="header-anchor">#</a> 转型生命周期</h3> <p>转型有四个阶段的生命周期 :</p> <p>计划转换.</p> <p>转换开始.</p> <p>转换运行.</p> <p>过渡结束.</p> <p>让我们逐一详细讨论这些过程.</p> <ul><li><p>计划转换
转换在创建时计划.当我们调用 selection.transition 时，我们正在安排转换.这也是当我们调用 attr()，style()和其他过渡方法来定义结束关键帧时.</p></li> <li><p>过渡开始
转换从其延迟开始，延迟是在安排转换时指定的.如果未指定延迟，则转换将尽快开始，通常在几毫秒之后.</p></li> <li><p>如果转换有延迟，则应仅在启动时设置起始值过渡开始了.我们可以通过听取开始事件 : 去;</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;body&quot;</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">transition</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">delay</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token string">&quot;start&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;green&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
   <span class="token punctuation">.</span><span class="token function">style</span><span class="token punctuation">(</span><span class="token string">&quot;color&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li><p>转换运行
当转换运行时，它会重复调用，其转换值范围为0到1.除延迟和持续时间外，转换还可以轻松控制时序.缓和会扭曲时间，例如慢进和慢进.某些缓动函数可能暂时给出大于1或小于0的值.</p></li> <li><p>转换结束
转换结束时间始终为1 ，以便在转换结束时准确设置结束值.转换基于其延迟和持续时间的总和而结束.转换结束时，将调度end事件.</p></li></ul> <blockquote><p>参考 http://www.it1352.com/OnLineTutorial/d3js/</p></blockquote></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/knowledge/assets/js/app.71f71174.js" defer></script><script src="/knowledge/assets/js/33.f7925eb2.js" defer></script>
  </body>
</html>
